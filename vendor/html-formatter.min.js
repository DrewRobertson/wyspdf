/*! Minimal HTML formatter - MIT License */
(function(global){
  function repeat(str, count){return new Array(count+1).join(str);}
  function format(html){
    try{
      var indent = 0;
      var result = html.replace(/>\s+</g, '><').replace(/</g,'\n<').trim().split(/\n/).map(function(line){
        if(line.match(/^<\//)){indent=Math.max(indent-1,0);} 
        var pad=repeat('  ', indent);
        if(line.match(/^<[^!?/].*[^/]>/)){indent++;}
        return pad + line.trim();
      }).join('\n');
      return result;
    }catch(e){return html;}
  }
  global.Formatter = { format: format };
})(this);
